name: Install TA-Lib on Ubuntu 24.04
 
on: [push, pull_request]
 
jobs:
  install:
    runs-on: ubuntu-24.04
    steps:
    - uses: actions/checkout@v3 
    
    - name: Install dependencies and build TA-Lib 
      run: |
        # 1. 安装编译依赖
        sudo apt-get update
        sudo apt-get install -y \
          build-essential \
          wget \
          cmake \
          automake \
          libtool \
          pkg-config 
        
        # 2. 下载并编译TA-Lib
        wget https://downloads.sourceforge.net/project/ta-lib/ta-lib/0.4.0/ta-lib-0.4.0-src.tar.gz  
        tar -xzf ta-lib-0.4.0-src.tar.gz 
        cd ta-lib/
        ./configure --prefix=/usr 
        make
        sudo make install 
        sudo ldconfig 
        
        # 3. 安装Python封装 
        pip install numpy Cython 
        TA_LIBRARY_PATH=/usr/lib \ 
        TA_INCLUDE_PATH=/usr/include \
        pip install TA-Lib 